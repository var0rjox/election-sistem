{% extends 'base-auth.html' %}

{% block title %}
Comite Electoral
{% endblock %}

{% block content_auth %}
  <form class="mt-5 m-auto p-4 bg-light w-100 shadow" style="max-width: 550px; " action="" method="post">
    <h1 class="h3 font-weight-normal text-center mb-3">Inicio de Sesi√≥n - Comite Electoral</h1>
    {{ form.hidden_tag() }}

    <div class="mx-auto" style="max-width: 480px;">
      {{ form.ci.label(class = "form-label") }}
        
      {{ form.ci(class = "form-control") }}
    </div>

    <div class="mx-auto" style="max-width: 480px;">
      {{ form.password.label(class = "form-label mt-2") }}

      {{ form.password(class = "form-control") }}
    </div>

    <div class="d-grid mx-auto" style="max-width: 480px;">
      {{form.submit(class="btn btn-lg btn-primary mt-3")}}

    </div>

    {% with messages =  get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-danger mt-3" role="alert">
          {{ messages[0] }}
        </div>
      {% endif %}
    {% endwith %}
  </form>

  <script>
    const $ci = document.querySelector('#ci-committee');
    const $password = document.querySelector('#password-committee');

    const isDigit = (char) => char >= '0' && char <= '9';

    $ci.addEventListener('input', (e) => {
      const last_char = e.target.value.slice(-1);
      if(!isDigit(last_char)) {
        e.target.value = e.target.value.slice(0, -1);
      }
    });

    $password.addEventListener('input', (e) => {
      const last_char = e.target.value.slice(-1);
      if(last_char === ' ') {
        e.target.value = e.target.value.slice(0, -1);
      }
    });
  </script>
{% endblock %}